 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/index.html b/index.html
index 9c49feccaf54c403ac4fba8e16f8088f3229669a..414078944914cb10d5797a812f1ca24dde0c90fb 100644
--- a/index.html
+++ b/index.html
@@ -1,49 +1,49 @@
 <!DOCTYPE html>
 <html lang="he">
 <head>
   <meta charset="UTF-8" />
   <title>Vocabulary Sentence Quiz</title>
   <meta name="viewport" content="width=device-width, initial-scale=1" />
 
   <!-- Tailwind 专 志CDN 专砖 -->
   <script src="https://cdn.tailwindcss.com"></script>
 </head>
 
 <body class="bg-slate-950 text-slate-50">
   <div id="root"></div>
 
   <!-- React + ReactDOM + Babel -->
   <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
   <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
   <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
 
   <!-- 住驻专转 XLSX 拽专转 拽爪 拽住 / CSV -->
   <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
 
   <script type="text/babel">
-    const { useState, useEffect } = React;
+    const { useState, useEffect, useMemo } = React;
 
     const API_BASE = "https://vocab-backend-lbum.onrender.com";
 
     //  砖拽转 注 (专/拽)
     if ("speechSynthesis" in window) {
       window.speechSynthesis.onvoiceschanged = () => {};
     }
 
     // 注专 拽专 砖 注专
     function shuffleArray(array) {
       const arr = [...array];
       for (let i = arr.length - 1; i > 0; i--) {
         const j = Math.floor(Math.random() * (i + 1));
         [arr[i], arr[j]] = [arr[j], arr[i]];
       }
       return arr;
     }
 
     // 驻专住 砖 拽住 :
     // sentence \t word \t translation
     function parseManualText(raw) {
       return raw
         .split(/\n/)
         .map((line) => line.trim())
         .filter(Boolean)
@@ -129,54 +129,55 @@
           } catch (e) {
             console.warn("Failed to load decks from storage", e);
           }
         }
         return [{ id: "deck-1", name: "Default", cards: [] }];
       });
 
       const [activeDeckId, setActiveDeckId] = useState("deck-1");
       const [manualText, setManualText] = useState("");
       const [mode, setMode] = useState("edit"); // "edit" | "practice" | "test"
       const [practiceIndex, setPracticeIndex] = useState(0);
       const [options, setOptions] = useState([]);
       const [selectedOptionId, setSelectedOptionId] = useState(null);
       const [feedback, setFeedback] = useState("");
       const [revealed, setRevealed] = useState(false);
 
       const [syncId, setSyncId] = useState("");
       const [cloudStatus, setCloudStatus] = useState("");
 
       const activeDeck =
         decks.find((d) => d.id === activeDeckId) || decks[0];
       const cards = activeDeck ? activeDeck.cards : [];
       const hasCards = cards.length > 0;
 
       //  专住 专 爪 转专/
-      const quizCards =
-        mode === "test"
+      const quizCards = useMemo(() => {
+        return mode === "test"
           ? cards.filter((c) => (c.status || "unknown") !== "known")
           : cards;
+      }, [cards, mode]);
 
       const hasQuizCards = quizCards.length > 0;
       const currentCard = hasQuizCards ? quizCards[practiceIndex] : null;
 
       // 砖专转 转拽转 -localStorage
       useEffect(() => {
         try {
           window.localStorage.setItem("vq_decks_v1", JSON.stringify(decks));
         } catch (e) {
           console.warn("Failed to save decks to storage", e);
         }
       }, [decks]);
 
       // 转 驻爪转  驻注 砖砖 转驻转
       useEffect(() => {
         if (!hasQuizCards || !currentCard) {
           setOptions([]);
           return;
         }
 
         const others = quizCards.filter((c, idx) => idx !== practiceIndex);
         const distractors = shuffleArray(others).slice(
           0,
           Math.min(3, others.length)
         );
 
EOF
)
